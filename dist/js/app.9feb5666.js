(function(t){function s(s){for(var e,r,o=s[0],c=s[1],l=s[2],h=0,d=[];h<o.length;h++)r=o[h],i[r]&&d.push(i[r][0]),i[r]=0;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(t[e]=c[e]);u&&u(s);while(d.length)d.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,s=0;s<n.length;s++){for(var a=n[s],e=!0,o=1;o<a.length;o++){var c=a[o];0!==i[c]&&(e=!1)}e&&(n.splice(s--,1),t=r(r.s=a[0]))}return t}var e={},i={app:0},n=[];function r(s){if(e[s])return e[s].exports;var a=e[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,s,a){r.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,s){if(1&s&&(t=r(t)),8&s)return t;if(4&s&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var e in t)r.d(a,e,function(s){return t[s]}.bind(null,e));return a},r.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(s,"a",s),s},r.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=s,o=o.slice();for(var l=0;l<o.length;l++)s(o[l]);var u=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,s,a){t.exports=a("56d7")},"01bf":function(t,s,a){"use strict";var e=a("6e26"),i=a.n(e);i.a},"0555":function(t,s,a){t.exports=a.p+"img/order.2062b956.svg"},"109d":function(t,s,a){"use strict";var e=a("90ca"),i=a.n(e);i.a},"159c":function(t,s,a){},1802:function(t,s,a){},2006:function(t,s,a){},"206d":function(t,s,a){"use strict";var e=a("9cbb"),i=a.n(e);i.a},"242b":function(t,s,a){},2659:function(t,s,a){"use strict";var e=a("bfec"),i=a.n(e);i.a},2728:function(t,s,a){"use strict";var e=a("4533"),i=a.n(e);i.a},2801:function(t,s,a){t.exports=a.p+"img/user_active.bcca0182.svg"},"28a4":function(t,s,a){"use strict";var e=a("ae9a"),i=a.n(e);i.a},2922:function(t,s,a){"use strict";var e=a("3eee"),i=a.n(e);i.a},"300d":function(t,s,a){"use strict";var e=a("452e"),i=a.n(e);i.a},"32a7":function(t,s,a){},"3c28":function(t,s,a){},"3de7":function(t,s,a){"use strict";var e=a("f32b"),i=a.n(e);i.a},"3eee":function(t,s,a){},"3f1d":function(t,s,a){},4246:function(t,s,a){t.exports=a.p+"img/elm_active.3957776b.svg"},"452e":function(t,s,a){},4533:function(t,s,a){},4624:function(t,s,a){},"47ed":function(t,s,a){t.exports=a.p+"img/elm.027a05e6.svg"},"4cb1":function(t,s,a){},"4fef":function(t,s,a){},5534:function(t,s,a){"use strict";var e=a("4fef"),i=a.n(e);i.a},"56d7":function(t,s,a){"use strict";a.r(s);a("cadf"),a("551c"),a("f751"),a("097d");var e=a("2b0e"),i=a("cadd");e["a"].use(i["a"]);var n,r=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("transition",{attrs:{mode:"out-in"}},[a("router-view")],1)],1)},o=[],c=(a("5c0b"),a("2877")),l={},u=Object(c["a"])(l,r,o,!1,null,null,null),h=u.exports,d=a("8c4f"),p=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"homePage"},[a("Header",{staticClass:"HeaderCPNT",scopedSlots:t._u([{key:"left",fn:function(){return[a("span",{staticClass:"brand",on:{click:t.reload}},[t._v("ele.me")])]},proxy:!0},{key:"right",fn:function(){return[a("router-link",{staticClass:"login",attrs:{to:"/login"}},[t._v("登录|注册")])]},proxy:!0}])}),a("div",{staticClass:"city_list"},[t._m(0),a("router-link",{staticClass:"select_city",attrs:{to:"/city/"+t.guess_city.id}},[a("span",{staticClass:"guess"},[t._v(t._s(t.guess_city.name))]),a("span",{staticClass:"right_arr"},[t._v(">")])])],1),a("cityList",{attrs:{city_list:t.hot_city,city_word:"热门城市",isBlue:!0}}),t._l(t.all_city,function(s,e){return a("div",{key:e},t._l(s,function(t,s){return a("cityList",{key:s,attrs:{city_list:t,city_word:s}})}),1)})],2)},f=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"location"},[a("span",{staticClass:"located"},[t._v("当前定位城市: ")]),a("span",{staticClass:"choice"},[t._v("定位不准时 , 请在城市列表中选择")])])}],_=a("5d73"),v=a.n(_),m=a("a4bb"),g=a.n(m),C=(a("55dd"),function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"headerPage"},[a("header",{staticClass:"header"},[t._t("left"),t._t("default"),t._t("right")],2)])}),y=[],b={},k=b,w=(a("2922"),Object(c["a"])(k,C,y,!1,null,null,null)),x=w.exports,$=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"city_listCPNT"},[a("p",{staticClass:"key"},[t._v(t._s(t.city_word))]),a("ul",{staticClass:"clearFix"},t._l(t.city_list,function(s){return a("li",{key:s.id,class:{isBlue:t.isBlue,value:!0},on:{click:function(a){return t.toCity(s)}}},[t._v(t._s(s.name))])}),0)])},S=[],L={props:["city_list","city_word","isBlue"],data:function(){return{}},created:function(){},methods:{toCity:function(t){this.$router.push({path:"/city/"+t.id})}}},P=L,O=(a("f09f"),Object(c["a"])(P,$,S,!1,null,null,null)),E=O.exports,j={data:function(){return{guess_city:{},hot_city:[],all_city:[]}},created:function(){this.getGuessCity(),this.getHotCity(),this.getAllCity()},methods:{getGuessCity:function(){var t=this;this.axios.get("v1/cities",{params:{type:"guess"}}).then(function(s){t.guess_city=s.data})},getHotCity:function(){var t=this;this.axios.get("v1/cities",{params:{type:"hot"}}).then(function(s){t.hot_city=s.data})},getAllCity:function(){var t=this;this.axios.get("v1/cities",{params:{type:"group"}}).then(function(s){var a=g()(s.data).sort(),e=!0,i=!1,n=void 0;try{for(var r,o=v()(a);!(e=(r=o.next()).done);e=!0){var c=r.value,l={};l[c]=s.data[c],t.all_city.push(l)}}catch(u){i=!0,n=u}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}})},reload:function(){window.location.reload()}},components:{Header:x,cityList:E}},H=j,I=(a("01bf"),Object(c["a"])(H,p,f,!1,null,null,null)),N=I.exports,q=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"cityPage"},[a("Header",{staticClass:"HeaderCPNT",scopedSlots:t._u([{key:"left",fn:function(){return[a("van-icon",{staticClass:"back",attrs:{name:"arrow-left"},on:{click:t.back}})]},proxy:!0},{key:"default",fn:function(){return[a("span",{staticClass:"city_name"},[t._v(t._s(t.city_info.name))])]},proxy:!0},{key:"right",fn:function(){return[a("span",{on:{click:t.changeCity}},[t._v("切换城市")])]},proxy:!0}])}),a("main",{staticClass:"main"},[a("div",{staticClass:"search"},[a("form",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"input_search",attrs:{type:"search",required:"",placeholder:"输入学校、商务楼、地址"},domProps:{value:t.keyword},on:{input:function(s){s.target.composing||(t.keyword=s.target.value)}}}),a("input",{staticClass:"search_btn",attrs:{type:"submit"},on:{click:t.showSearch}})])]),a("div",{staticClass:"search_res"},[0===t.search_flag?a("p",{staticClass:"word"},[t._v("搜索历史")]):t._e(),2===t.search_flag?a("div",{staticClass:"no_res"},[t._v("很抱歉! 无搜索结果")]):t._e(),a("div",{staticClass:"show_search"},t._l(t.res,function(s){return a("div",{key:s.geohash,staticClass:"site_box",on:{click:function(a){return t.goandsave(s)}}},[a("p",{staticClass:"site_name"},[t._v(t._s(s.name))]),a("p",{staticClass:"site_addr"},[t._v(t._s(s.address))])])}),0),0===t.search_flag&&0!==t.search_his.length?a("div",{staticClass:"clear_all",on:{click:t.clearAll}},[t._v("清空所有")]):t._e()])])],1)},T=[],A=a("bd86"),R=a("f499"),D=a.n(R),B={props:["id"],data:function(){return{search_flag:0,keyword:"",city_info:{},search_his:[],res:[]}},created:function(){this.getCityInfo();var t=window.localStorage.getItem("addr_his");this.search_his=t?JSON.parse(t):[],this.res=this.search_his},methods:(n={back:function(){this.$router.push({path:"/home"})},getCityInfo:function(){var t=this;this.axios.get("v1/cities/".concat(this.id)).then(function(s){t.city_info=s.data})},showSearch:function(t){""!==this.keyword&&(t.preventDefault(),this.getSearchInfo())},getSearchInfo:function(){var t=this;this.axios.get("v1/pois",{params:{city_id:this.id,keyword:this.keyword}}).then(function(s){t.res=s.data,t.isExist()})},isExist:function(){0!==this.res.length?this.search_flag=1:this.search_flag=2},goandsave:function(t){var s=this.search_his.some(function(s){return s.geohash===t.geohash});s||(this.search_his.unshift(t),window.localStorage.setItem("addr_his",D()(this.search_his))),this.$store.commit("getSiteInfo",t),this.$router.push({path:"/msite",query:{geohash:t.geohash}})},clearAll:function(){window.localStorage.removeItem("addr_his"),this.search_his=this.res=[]}},Object(A["a"])(n,"back",function(){this.$router.go(-1)}),Object(A["a"])(n,"changeCity",function(){this.$router.push({path:"/home"})}),n),watch:{keyword:function(t){""===t&&(this.search_flag=0,this.res=this.search_his)}},components:{Header:x}},F=B,G=(a("300d"),Object(c["a"])(F,q,T,!1,null,null,null)),M=G.exports,z=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"msitePage"},[a("Header",{staticClass:"HeaderCPNT"},[[a("van-icon",{staticClass:"search_icon",attrs:{name:"search"},on:{click:t.toSearch}})],[a("span",{staticClass:"city_name",on:{click:t.toHome}},[t._v(t._s(t.addrName))])],[a("router-link",{staticClass:"login",attrs:{to:"/login"}},[t._v("登录|注册")])]],2),a("div",{staticClass:"cate"},[a("div",{staticClass:"slidebox"},[a("van-swipe",{staticClass:"slide",attrs:{width:375},on:{change:t.onChange}},t._l(t.cateList,function(s,e){return a("van-swipe-item",{key:e},[a("ul",t._l(s,function(s){return a("li",{key:s.id,on:{click:function(a){return t.toFood(s)}}},[a("img",{attrs:{src:t.imgsrc+s.image_url,alt:""}}),a("p",[t._v(t._s(s.title))])])}),0),a("div",{staticClass:"custom-indicator",attrs:{slot:"indicator"},slot:"indicator"},[t._v("\n            "+t._s(t.current+1)+"/2\n          ")])])}),1)],1)]),a("main",{staticClass:"main"},[a("div",{staticClass:"nearbyShop"},[a("van-icon",{staticClass:"shop_icon",attrs:{name:"shop-o"}}),a("span",[t._v("附近商家")])],1),t._l(t.shopList,function(s,e){return a("shopCard",{key:e,attrs:{shopList:s,geohash:t.geohash}})})],2),a("tabbar",{attrs:{i:0}})],1)},J=[],Q=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"footerPage"},[a("van-tabbar",{model:{value:t.active,callback:function(s){t.active=s},expression:"active"}},[a("van-tabbar-item",{on:{click:t.msite},scopedSlots:t._u([{key:"icon",fn:function(s){return a("img",{attrs:{src:s.active?t.icon.elm_a:t.icon.elm_n}})}}])},[a("span",[t._v("外卖")])]),a("van-tabbar-item",{on:{click:t.search},scopedSlots:t._u([{key:"icon",fn:function(s){return a("img",{attrs:{src:s.active?t.icon.search_a:t.icon.search_n}})}}])},[a("span",[t._v("搜索")])]),a("van-tabbar-item",{on:{click:t.order},scopedSlots:t._u([{key:"icon",fn:function(s){return a("img",{attrs:{src:s.active?t.icon.order_a:t.icon.order_n}})}}])},[a("span",[t._v("订单")])]),a("van-tabbar-item",{on:{click:t.profile},scopedSlots:t._u([{key:"icon",fn:function(s){return a("img",{attrs:{src:s.active?t.icon.user_a:t.icon.user_n}})}}])},[a("span",[t._v("我的")])])],1)],1)},U=[],W={props:["i"],data:function(){return{icon:{elm_n:a("47ed"),elm_a:a("4246"),search_n:a("ff62"),search_a:a("ca34"),order_n:a("0555"),order_a:a("cd3c"),user_n:a("cb1e"),user_a:a("2801")},active:this.i}},computed:{geohash:function(){return this.$store.state.site.geohash}},methods:{msite:function(){this.active=0,this.$router.push({path:"/msite",query:{geohash:this.geohash}})},search:function(){this.active=1,this.$router.push({path:"/search/".concat(this.geohash)})},order:function(){this.active=2,this.$router.push({path:"/order"})},profile:function(){this.active=3,this.$router.push({path:"/profile"})}},created:function(){}},K=W,V=(a("f4c6"),Object(c["a"])(K,Q,U,!1,null,null,null)),X=V.exports,Y=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"shopCardPage"},[a("div",{staticClass:"shopCard",on:{click:t.toShop}},[a("img",{staticClass:"shopImg",attrs:{src:t.imgsrc+t.shopList.image_path,alt:""}}),a("div",{staticClass:"info"},[a("div",{staticClass:"info_top"},[a("div",{staticClass:"top_left"},[a("span",{staticClass:"brand"},[t._v("品牌")]),a("span",{staticClass:"shop_name"},[t._v(t._s(t.shopList.name))])]),a("div",{staticClass:"top_right"},t._l(t.shopList.supports,function(s){return a("span",{key:s.id},[t._v(t._s(s.icon_name))])}),0)]),a("div",{staticClass:"info_middle"},[a("div",{staticClass:"middle_left"},[a("van-rate",{attrs:{color:"rgb(247, 182, 90)","allow-half":"",size:12,readonly:""},model:{value:t.star,callback:function(s){t.star=s},expression:"star"}}),a("span",{staticClass:"rating"},[t._v(t._s(t.shopList.rating))]),a("span",{staticClass:"mon_sale"},[t._v("月售"+t._s(t.shopList.recent_order_num)+"单")])],1),t._m(0)]),a("div",{staticClass:"info_bottom"},[a("div",{staticClass:"bottom_left"},[a("span",[t._v("¥"+t._s(t.shopList.float_minimum_order_amount)+"起送 / "+t._s(t.shopList.piecewise_agent_fee.tips))])]),a("div",{staticClass:"bottom_right"},[a("span",[t._v(t._s(t.shopList.distance)+" / ")]),a("span",{staticClass:"needTime"},[t._v(t._s(t.shopList.order_lead_time))])])])])])])},Z=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"middle_right"},[a("span",{staticClass:"fengniao"},[t._v("蜂鸟专送")]),a("span",{staticClass:"zhunshi"},[t._v("准时达")])])}],tt={props:["shopList","geohash"],data:function(){return{star:2,imgsrc:"https://elm.cangdu.org/img/"}},created:function(){this.star=this.shopList.rating},methods:{toShop:function(){this.$router.push({path:"/shop",query:{geohash:this.geohash,id:this.shopList.id}})}}},st=tt,at=(a("8312"),Object(c["a"])(st,Y,Z,!1,null,null,null)),et=at.exports,it={data:function(){return{current:0,geohash:this.$route.query.geohash,addrName:"",latitude:"",longitude:"",imgsrc:"https://fuss10.elemecdn.com",cateList:[],shopList:[]}},created:function(){this.getAddr(),this.getFoodsCate()},methods:{getAddr:function(){var t=this;this.axios.get("v2/pois/".concat(this.geohash)).then(function(s){t.addrName=s.data.name,t.latitude=s.data.latitude,t.longitude=s.data.longitude,t.getShopList()})},getFoodsCate:function(){var t=this;this.axios.get("v2/index_entry").then(function(s){t.cateList.push(s.data.slice(0,8)),t.cateList.push(s.data.slice(8,16))})},getShopList:function(){var t=this;this.axios.get("shopping/restaurants",{params:{latitude:this.latitude,longitude:this.longitude}}).then(function(s){t.shopList=s.data})},toHome:function(){this.$router.push({path:"/home"})},toSearch:function(){this.$router.push({path:"search/".concat(this.geohash)})},toFood:function(t){var s=t.title,a=t.id,e=this.geohash;this.$router.push({path:"/food",query:{geohash:e,title:s,restaurant_category_id:a}})},onChange:function(t){this.current=t}},components:{tabbar:X,Header:x,shopCard:et}},nt=it,rt=(a("a41a"),Object(c["a"])(nt,z,J,!1,null,null,null)),ot=rt.exports,ct=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"foodPage"},[a("header-default",{attrs:{title:t.info.title}}),t._m(0),a("div",{staticClass:"main"},t._l(t.shopList,function(t,s){return a("shopCard",{key:s,attrs:{shopList:t}})}),1)],1)},lt=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"filterFood"},[a("ul",{staticClass:"filterBox clearFix"},[a("li",[a("span",{staticClass:"word"},[t._v("商超便利")]),a("span",{staticClass:"arrow"})]),a("li",[a("span",{staticClass:"word"},[t._v("排序")]),a("span",{staticClass:"arrow"})]),a("li",[a("span",{staticClass:"word"},[t._v("筛选")]),a("span",{staticClass:"arrow"})])])])}],ut=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"headerDefaultPage"},[a("Header",{scopedSlots:t._u([{key:"left",fn:function(){return[a("van-icon",{staticClass:"back",attrs:{name:"arrow-left"},on:{click:t.back}})]},proxy:!0},{key:"default",fn:function(){return[a("span",{staticClass:"city_name"},[t._v(t._s(t.title))])]},proxy:!0},{key:"right",fn:function(){return[a("span",{staticClass:"space"})]},proxy:!0}])})],1)},ht=[],dt={props:["title"],data:function(){return{}},methods:{back:function(){this.$router.go(-1)}},components:{Header:x}},pt=dt,ft=(a("92c0"),Object(c["a"])(pt,ut,ht,!1,null,null,null)),_t=ft.exports,vt={data:function(){return{info:{},shopList:[]}},created:function(){this.getInfo()},computed:{latitude:function(){return this.$store.state.site.latitude},longitude:function(){return this.$store.state.site.longitude}},methods:{getInfo:function(){this.info=this.$route.query,this.getShops()},getShops:function(){var t=this;this.axios.get("shopping/restaurants",{params:{latitude:this.latitude,longitude:this.longitude,restaurant_category_id:this.info.restaurant_category_id}}).then(function(s){t.shopList=s.data})}},components:{headerDefault:_t,shopCard:et}},mt=vt,gt=(a("109d"),Object(c["a"])(mt,ct,lt,!1,null,null,null)),Ct=gt.exports,yt=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"searchPage"},[a("header-default",{attrs:{title:"搜索"}}),a("div",{staticClass:"keyword"},[a("form",{attrs:{action:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"search_input",attrs:{type:"search",placeholder:"请输入商家或美食名称"},domProps:{value:t.keyword},on:{input:function(s){s.target.composing||(t.keyword=s.target.value)}}}),a("input",{staticClass:"search_btn",attrs:{type:"submit"},on:{click:t.showRes}})])]),a("div",{staticClass:"main"},[t.isHistory()?a("div",{staticClass:"history"},[a("p",{staticClass:"word"},[t._v("搜索历史")]),a("div",{staticClass:"content"},[t._l(t.his,function(s){return a("p",{key:s,staticClass:"search_history_word",on:{click:function(a){return t.his_showRes(s)}}},[t._v(t._s(s))])}),a("div",{staticClass:"clearAll",on:{click:t.clearAll}},[t._v("清空搜索历史")])],2)]):t._e(),1==t.res_flag?a("div",{staticClass:"res"},[a("p",{staticClass:"shopWord"},[t._v("商家")]),a("div",{staticClass:"shopCard"},t._l(t.res,function(s){return a("shopCard-search",{key:s.id,attrs:{geohash:t.geohash,res:s}})}),1)]):t._e(),2==t.res_flag?a("div",{staticClass:"no_res"},[t._v("\n      很抱歉 ! 无搜索结果\n    ")]):t._e()]),a("tabbar",{attrs:{i:1}})],1)},bt=[],kt=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"shopCardSearchPage"},[a("div",{staticClass:"shopCard",on:{click:t.toShop}},[a("div",{staticClass:"img"},[a("img",{attrs:{src:t.imgsrc+t.res.image_path,alt:""}})]),a("div",{staticClass:"info"},[a("p",{staticClass:"title"},[a("span",[t._v(t._s(t.res.name))]),t._m(0)]),a("p",[t._v("月售 "+t._s(t.res.recent_order_num)+" 单")]),a("p",[t._v(t._s(t.res.float_minimum_order_amount)+" 元起送 / 距离"+t._s(t.res.distance))])])])])},wt=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("span",{staticClass:"pay"},[a("span",{staticClass:"payword"},[t._v("支付")])])}],xt={props:["res","geohash"],data:function(){return{imgsrc:"https://elm.cangdu.org/img/"}},methods:{toShop:function(){this.$router.push({path:"/shop",query:{geohash:this.geohash,id:this.res.id}})}}},$t=xt,St=(a("b3b4"),Object(c["a"])($t,kt,wt,!1,null,null,null)),Lt=St.exports,Pt={data:function(){return{res_flag:0,res:[],his:[],geohash:this.$route.params.geohash,keyword:""}},created:function(){var t=window.localStorage.getItem("search_his");this.his=t?JSON.parse(t):[]},methods:{showRes:function(t){t.preventDefault(),""!==this.keyword&&this.getSearchRes()},getSearchRes:function(){var t=this;this.axios.get("v4/restaurants",{params:{geohash:this.geohash,keyword:this.keyword}}).then(function(s){0!==s.data.status?(t.res=s.data,t.isExist()):t.res_flag=2})},isExist:function(){this.isStore(),0!=this.res.length?this.res_flag=1:this.res_flag=2},isStore:function(){var t=this,s=this.his.some(function(s){return s===t.keyword});s||(this.his.push(this.keyword),window.localStorage.setItem("search_his",D()(this.his)))},isHistory:function(){if(0!==this.his.length&&0===this.res_flag)return!0},his_showRes:function(t){this.keyword=t,this.res_flag=-1,this.getSearchRes()},clearAll:function(){this.his=[],window.localStorage.removeItem("search_his")}},watch:{keyword:function(t){""===t&&(this.res_flag=0)}},components:{headerDefault:_t,shopCardSearch:Lt,tabbar:X}},Ot=Pt,Et=(a("3de7"),Object(c["a"])(Ot,yt,bt,!1,null,null,null)),jt=Et.exports,Ht=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"orderPage"},[a("header-default",{attrs:{title:"订单列表"}}),a("tabbar",{attrs:{i:2}})],1)},It=[],Nt={data:function(){return{}},methods:{},components:{headerDefault:_t,tabbar:X}},qt=Nt,Tt=(a("2728"),Object(c["a"])(qt,Ht,It,!1,null,null,null)),At=Tt.exports,Rt=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"profilePage"},[a("header-default",{attrs:{title:"我的"}}),a("div",{staticClass:"myProfile"},[a("div",{staticClass:"info",on:{click:t.loginOrInfo}},[t._m(0),t._m(1),a("van-icon",{attrs:{name:"arrow",color:"#fff"}})],1),t._m(2)]),a("div",{staticClass:"function"},[a("router-link",{attrs:{to:"/order",tag:"div"}},[a("span",{staticClass:"iconfont icon-order"}),a("p",[a("span",[t._v("我的订单")]),a("van-icon",{attrs:{name:"arrow",color:"#bbb"}})],1)]),a("div",[a("span",{staticClass:"iconfont icon-shop-bag"}),a("p",[a("span",[t._v("积分商城")]),a("van-icon",{attrs:{name:"arrow",color:"#bbb"}})],1)]),a("div",[a("span",{staticClass:"iconfont icon-vip"}),a("p",{staticClass:"noBorder"},[a("span",[t._v("饿了么会员")]),a("van-icon",{attrs:{name:"arrow",color:"#bbb"}})],1)]),a("router-link",{attrs:{tag:"div",to:"/service"}},[a("span",{staticClass:"iconfont icon-server-center"}),a("p",[a("span",[t._v("服务中心")]),a("van-icon",{attrs:{name:"arrow",color:"#bbb"}})],1)]),a("div",[a("span",{staticClass:"elm"},[t._v("e")]),a("p",{staticClass:"noBorder"},[a("span",[t._v("下载饿了么APP")]),a("van-icon",{attrs:{name:"arrow",color:"#bbb"}})],1)])],1),a("tabbar",{attrs:{i:3}})],1)},Dt=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"avatar"},[a("span",{staticClass:"iconfont icon-user-nologin"})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"loginInfo"},[a("p",{staticClass:"login"},[t._v("\n            登录/注册\n        ")]),a("p",{staticClass:"phone"},[a("span",{staticClass:"iconfont icon-phone"}),a("span",[t._v("暂无绑定手机号")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",{staticClass:"aboutMoney"},[a("li",[a("p",[a("span",{staticClass:"moneyOrange"},[t._v("0.00")]),t._v("元")]),a("p",[t._v("我的余额")])]),a("li",[a("p",[a("span",{staticClass:"discountRed"},[t._v("0")]),t._v("个")]),a("p",[t._v("我的优惠")])]),a("li",[a("p",[a("span",{staticClass:"pointsGreen"},[t._v("0")]),t._v("分")]),a("p",[t._v("我的积分")])])])}],Bt={data:function(){return{}},methods:{loginOrInfo:function(){this.$router.push("/login")}},components:{headerDefault:_t,tabbar:X}},Ft=Bt,Gt=(a("6346"),Object(c["a"])(Ft,Rt,Dt,!1,null,null,null)),Mt=Gt.exports,zt=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"loginPage"},[a("header-default",{attrs:{title:"密码登录"}}),a("div",{staticClass:"main"},[a("van-cell-group",[a("van-field",{attrs:{required:"",clearable:"",label:"用户名",placeholder:"请输入用户名"},on:{"click-right-icon":function(s){return t.$toast("question")}},model:{value:t.username,callback:function(s){t.username=s},expression:"username"}}),a("van-field",{attrs:{type:"password",label:"密码",placeholder:"请输入密码",required:""},model:{value:t.password,callback:function(s){t.password=s},expression:"password"}}),a("van-field",{attrs:{center:"",required:"",clearable:"",label:"验证码",placeholder:"请输入验证码","right-icon":t.imgsrc},on:{"click-right-icon":t.refresh},model:{value:t.checking,callback:function(s){t.checking=s},expression:"checking"}})],1),a("p",{staticClass:"tips"},[t._v("温馨提示: 未注册过的账号, 登录时将自动注册")]),a("p",{staticClass:"tips"},[t._v("注册过的用户可凭账号密码登录")]),a("div",{staticClass:"login_btn"},[a("van-button",{attrs:{size:"large",type:"primary"},on:{click:t.login}},[t._v("登录")])],1),a("Notice",{attrs:{title:t.lack_word,show:t.show},on:{"hidden-notice":t.hiddenNotice}}),a("div",{staticClass:"repassword"},[a("router-link",{staticClass:"word",attrs:{to:"/home"}},[t._v("重置密码?")])],1)],1)],1)},Jt=[],Qt=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"noticePage"},[a("van-dialog",{attrs:{"show-confirm-button":!1},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[a("van-icon",{attrs:{name:"warning-o"}}),a("p",{staticClass:"word"},[t._v(t._s(t.title))]),a("van-button",{staticClass:"comfirmBTN",attrs:{size:"large",type:"primary"},on:{click:function(s){return t.$emit("hidden-notice")}}},[t._v("确认")])],1)],1)},Ut=[],Wt={props:["title","show"],data:function(){return{sub_show:this.show}},methods:{}},Kt=Wt,Vt=(a("77e5"),Object(c["a"])(Kt,Qt,Ut,!1,null,null,null)),Xt=Vt.exports,Yt={data:function(){return{username:"",password:"",checking:"",imgsrc:"",show:!1,lack_word:"",lack_username:"请输入手机号/邮箱/用户名",lack_pw:"请输入密码",lack_check:"请输入验证码"}},created:function(){this.getCaptchas()},methods:{getCaptchas:function(){var t=this;this.axios.post("v1/captchas").then(function(s){t.imgsrc=s.data.code})},refresh:function(){this.getCaptchas()},login:function(){this.lack_keyword()},lack_keyword:function(){if(this.username)if(this.password){if(this.checking)return!0;this.lack_word=this.lack_check}else this.lack_word=this.lack_pw;else this.lack_word=this.lack_username;this.show=!0},hiddenNotice:function(){this.show=!1}},components:{headerDefault:_t,Notice:Xt}},Zt=Yt,ts=(a("206d"),Object(c["a"])(Zt,zt,Jt,!1,null,null,null)),ss=ts.exports,as=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"servicePage"},[a("header-default",{attrs:{title:"服务中心"}}),t._m(0),a("div",{staticClass:"hotQuestion"},[a("div",{staticClass:"title"},[t._v("\n      热门问题\n    ")]),t._l(t.captionList,function(s,e){return a("router-link",{key:s,staticClass:"detail",attrs:{tag:"div",to:"/question/"+e,content:1}},[a("span",{staticClass:"word"},[t._v(t._s(t.explain[s]))]),a("van-icon",{attrs:{name:"arrow",color:"#555"}})],1)})],2)],1)},es=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"server"},[a("div",{staticClass:"online"},[a("p",{staticClass:"iconfont icon-service"}),a("p",[t._v("在线客服")])]),a("div",{staticClass:"phone"},[a("p",{staticClass:"iconfont icon-hot-line"}),a("p",[t._v("电话客服")])])])}],is=(a("6762"),a("2fdb"),{data:function(){return{}},created:function(){this.getExplain()},computed:{captionList:function(){return this.$store.state.explainCaption},explain:function(){return this.$store.state.explain}},methods:{getExplain:function(){var t=this;this.$store.state.explainContent.length||this.axios.get("v3/profile/explain").then(function(s){t.$store.commit("getInfo",{data:s.data,name:"explain"}),t.toList(s.data)})},toList:function(t){var s=[],a=[];for(var e in t)e.includes("Content")?s.push(e):e.includes("Caption")&&a.push(e);this.$store.commit("getInfo",{data:s,name:"explainContent"}),this.$store.commit("getInfo",{data:a,name:"explainCaption"})}},components:{headerDefault:_t}}),ns=is,rs=(a("28a4"),Object(c["a"])(ns,as,es,!1,null,null,null)),os=rs.exports,cs=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"questionPage"},[a("header-default",{attrs:{title:t.explain[t.captionList[t.num]]}}),a("div",{staticClass:"content",domProps:{innerHTML:t._s(t.explain[t.contentList[t.num]])}})],1)},ls=[],us={props:["num"],data:function(){return{}},created:function(){},computed:{contentList:function(){return this.$store.state.explainContent},captionList:function(){return this.$store.state.explainCaption},explain:function(){return this.$store.state.explain}},methods:{},components:{headerDefault:_t}},hs=us,ds=(a("61ce"),Object(c["a"])(hs,cs,ls,!1,null,null,null)),ps=ds.exports,fs=function(){var t=this,s=t.$createElement,a=t._self._c||s;return t.res?a("div",{staticClass:"shopPage"},[a("header",{staticClass:"header"},[a("div",{staticClass:"arrowLeft"},[a("van-icon",{attrs:{name:"arrow-left"},on:{click:t.back}})],1),a("div",{staticClass:"detail"},[a("img",{staticClass:"img",attrs:{src:t.imgsrc+t.res.image_path,alt:""}}),a("div",{staticClass:"info"},[a("p",{staticClass:"title"},[t._v(t._s(t.res.name))]),a("p",[t._v(t._s(t.res.delivery_mode.text)+" / "+t._s(t.res.order_lead_time)+"分钟送达 / "+t._s(t.res.piecewise_agent_fee.tips))]),a("p",[t._v("公告 : "+t._s(t.res.promotion_info))])]),a("van-icon",{staticClass:"arrowRight",attrs:{name:"arrow"}})],1),t.res.activities.length?a("div",{staticClass:"activity",on:{click:t.showPopup}},[a("p",[a("span",{staticClass:"discount"},[t._v(t._s(t.res.activities[0].icon_name))]),a("span",[t._v(" "+t._s(t.res.activities[0].description)+"( APP专享 )")])]),a("p",[a("span",[t._v("1个活动")]),a("van-icon",{attrs:{name:"arrow"}})],1)]):t._e()]),t.res.activities.length?a("van-popup",{attrs:{overlay:!1},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[a("p",{staticClass:"name"},[t._v(t._s(t.res.name))]),a("div",{staticClass:"content"},[a("p",[a("span",{staticClass:"title"},[t._v("优惠信息")])]),a("p",{staticClass:"content"},[a("span",{staticClass:"discount"},[t._v(t._s(t.res.activities[0].icon_name))]),a("span",[t._v(" "+t._s(t.res.activities[0].description)+"( APP专享 )")])]),a("p",[a("span",{staticClass:"title"},[t._v("商家公告")])]),a("p",{staticClass:"content"},[t._v(t._s(t.res.promotion_info))])]),a("van-icon",{staticClass:"clsBTN",attrs:{name:"close"},on:{click:t.hiddenPopup}})],1):t._e(),a("van-tabs",{attrs:{"title-active-color":"rgb(49, 146, 239)",color:"rgb(49, 146, 239)","line-width":30}},[a("van-tab",{attrs:{title:"商品"}},[a("goods",{attrs:{id:t.id}})],1),a("van-tab",{attrs:{title:"评论"}},[a("comment",{attrs:{id:t.id}})],1)],1)],1):t._e()},_s=[],vs=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"CommentCPNT"},[t._m(0),a("div",{staticClass:"commentContent"},[a("div",{staticClass:"cateBox"},[a("ul",{ref:"cateList",staticClass:"cate"},t._l(t.commentCate,function(s,e){return a("li",{key:s._id,class:{disabled:s.unsatisfied,active:"全部"===s.name},on:{click:function(a){return t.filter(s,e)}}},[t._v(t._s(s.name)+"("+t._s(s.count)+")")])}),0)]),t._l(t.commentRes,function(s){return a("div",{key:s._id,staticClass:"commentCard"},[a("img",{staticClass:"avatar",attrs:{src:t.avatar(s.avatar),alt:""}}),a("div",{staticClass:"content"},[a("p",[t._v(t._s(s.username))]),a("p",[a("span",{staticClass:"star"},[t._v("★★★★★")]),a("span",[t._v(" "+t._s(s.time_spent_desc))])]),t._l(s.item_ratings,function(s){return a("img",{key:s.food_id,staticClass:"img",attrs:{src:t.handlerImgSrc(s.image_hash),alt:""}})}),a("p",t._l(s.item_ratings,function(s){return a("span",{key:s.food_id,staticClass:"foodName"},[t._v(t._s(s.food_name))])}),0)],2),a("span",{staticClass:"postDate"},[t._v(t._s(s.rated_at))])])})],2)])},ms=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("header",{staticClass:"Commentheader"},[a("div",{staticClass:"left"},[a("p",{staticClass:"rating"},[t._v("4.6")]),a("p",[t._v("综合评价")]),a("p",{staticClass:"percent"},[t._v("高于周边商家76.9%")])]),a("div",{staticClass:"right"},[a("p",[a("span",[t._v("服务态度")]),a("span",{staticClass:"rating"},[t._v("★★★★★")]),a("span",{staticClass:"rating"},[t._v("4.7")])]),a("p",[a("span",[t._v("菜品评价")]),a("span",{staticClass:"rating"},[t._v("★★★★☆")]),a("span",{staticClass:"rating"},[t._v("4.4")])]),a("p",[a("span",[t._v("送达时间")]),a("span",{staticClass:"minute"}),a("span",{staticClass:"minute"},[t._v("分钟")])])])])}],gs={props:["id"],data:function(){return{commentCate:void 0,commentRes:void 0,imgsrc:"https://fuss10.elemecdn.com",defaultAvatar:"default.jpg"}},mounted:function(){this.getCommentTags()},methods:{getCommentTags:function(){var t=this;this.axios.get("ugc/v2/restaurants/".concat(this.id,"/ratings/tags")).then(function(s){t.commentCate=s.data,t.getComment()})},filter:function(t,s){var a=this.$refs.cateList,e=!0,i=!1,n=void 0;try{for(var r,o=v()(a.children);!(e=(r=o.next()).done);e=!0){var c=r.value;c.classList.remove("active")}}catch(u){i=!0,n=u}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}var l=a.children[s];l.classList.add("active")},getComment:function(){var t=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"全部";this.axios.get("ugc/v2/restaurants/".concat(this.id,"/ratings"),{params:{tag_name:s,offset:0,limit:10}}).then(function(s){t.commentRes=s.data})},avatar:function(t){return""===t?"https://elm.cangdu.org/img/"+this.defaultAvatar:this.handlerImgSrc(t)},handlerImgSrc:function(t){var s="/"+t.substring(0,1)+"/"+t.substring(1,3)+t.substring(3)+".jpeg";return this.imgsrc+s}}},Cs=gs,ys=(a("5534"),Object(c["a"])(Cs,vs,ms,!1,null,null,null)),bs=ys.exports,ks=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"goodsCPNT"},[a("cube-scroll-nav",{attrs:{side:!0,data:t.data,current:t.current},on:{change:t.changeHandler,"sticky-change":t.stickyChangeHandler}},t._l(t.data,function(s){return a("cube-scroll-nav-panel",{key:s.id,attrs:{label:s.id,title:s.name}},t._l(s.foods,function(s){return a("div",{key:s.id,staticClass:"foodCard"},[a("div",{staticClass:"left"},[a("img",{attrs:{src:t.imgsrc+s.image_path,alt:""}})]),a("div",{staticClass:"right"},[a("p",{staticClass:"title"},[t._v(t._s(s.name))]),a("p",{staticClass:"subTitle"},[t._v(t._s(s.description))]),a("p",[t._v("月售"+t._s(s.month_sales)+"份 好评率"+t._s(s.satisfy_rate)+"%")]),s.activity?a("p",{staticClass:"tag"},[t._v(t._s(s.activity.image_text))]):t._e(),a("div",{staticClass:"priceSection"},[a("p",{staticClass:"left"},[a("span",{staticClass:"price"},[t._v("¥20")]),a("span",[t._v(" 起")])]),a("span",[t._v("+")])])])])}),0)}),1)],1)},ws=[],xs={props:["id"],data:function(){return{imgsrc:"https://elm.cangdu.org/img/",current:"",data:[]}},created:function(){this.getGoods()},methods:{getGoods:function(){var t=this;this.axios.get("shopping/v2/menu",{params:{restaurant_id:this.id}}).then(function(s){t.data=s.data,t.current=t.data[0].id,console.log(t.data)})},changeHandler:function(t){console.log("changed to:",t)},stickyChangeHandler:function(t){console.log("sticky-change",t)}}},$s=xs,Ss=(a("e55d"),Object(c["a"])($s,ks,ws,!1,null,null,null)),Ls=Ss.exports,Ps={data:function(){return{id:this.$route.query.id,imgsrc:"https://elm.cangdu.org/img/",res:void 0,show:!1}},created:function(){this.getShopDetail()},methods:{getShopDetail:function(){var t=this;this.axios.get("shopping/restaurant/".concat(this.id)).then(function(s){t.res=s.data,t.isRight=!0})},back:function(){this.$router.go(-1)},showPopup:function(){this.show=!0},hiddenPopup:function(){this.show=!1}},components:{comment:bs,goods:Ls}},Os=Ps,Es=(a("a6b9"),Object(c["a"])(Os,fs,_s,!1,null,null,null)),js=Es.exports,Hs=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"testPage"},[a("cube-scroll-nav",{attrs:{side:!0,data:t.data,current:t.current},on:{change:t.changeHandler,"sticky-change":t.stickyChangeHandler}},t._l(t.data,function(s){return a("cube-scroll-nav-panel",{key:s.id,attrs:{label:s.id,title:s.name}},[a("ul",t._l(s.foods,function(s){return a("li",{key:s.id},[a("div",[a("img",{attrs:{src:t.imgsrc+s.image_path}}),a("p",[t._v(t._s(s.name))])])])}),0)])}),1)],1)},Is=[],Ns={data:function(){return{imgsrc:"https://elm.cangdu.org/img/",data:[],current:"",id:1}},created:function(){this.getGoods()},methods:{getGoods:function(){var t=this;this.axios.get("shopping/v2/menu",{params:{restaurant_id:this.id}}).then(function(s){t.data=s.data,t.current=t.data[0].id,console.log(t.data)})},changeHandler:function(t){console.log("changed to:",t)},stickyChangeHandler:function(t){console.log("sticky-change",t)}}},qs=Ns,Ts=(a("2659"),Object(c["a"])(qs,Hs,Is,!1,null,null,null)),As=Ts.exports;e["a"].use(d["a"]);var Rs=new d["a"]({mode:"history",base:"/",routes:[{path:"/",component:h,children:[{path:"",redirect:"/home"},{path:"/home",component:N,props:!0},{path:"/city/:id",component:M,props:!0},{path:"/msite",component:ot,props:!0},{path:"/food",component:Ct,props:!0},{path:"/search/:geohash",component:jt,props:!0},{path:"/order",component:At},{path:"/profile",component:Mt},{path:"/login",component:ss},{path:"/service",component:os,props:!0},{path:"/question/:num",component:ps,props:!0},{path:"/shop",component:js},{path:"/test",component:As}]}]}),Ds=a("2f62");e["a"].use(Ds["a"]);var Bs=new Ds["a"].Store({state:{site:{},explain:{},explainCaption:[],explainContent:[]},mutations:{getSiteInfo:function(t,s){t.site=s},getInfo:function(t,s){t[s.name]=s.data}},actions:{}}),Fs=(a("4624"),a("bc3a")),Gs=a.n(Fs),Ms=a("a7fe"),zs=a.n(Ms),Js=a("b970");a("157a"),a("c59a"),a("159c");e["a"].use(zs.a,Gs.a),e["a"].use(Js["a"]),e["a"].axios.defaults.baseURL="https://elm.cangdu.org",e["a"].config.productionTip=!1,new e["a"]({router:Rs,store:Bs,render:function(t){return t(h)}}).$mount("#app")},"5c0b":function(t,s,a){"use strict";var e=a("5e27"),i=a.n(e);i.a},"5e27":function(t,s,a){},"61ce":function(t,s,a){"use strict";var e=a("857f"),i=a.n(e);i.a},6346:function(t,s,a){"use strict";var e=a("e722"),i=a.n(e);i.a},"6e26":function(t,s,a){},"77e5":function(t,s,a){"use strict";var e=a("242b"),i=a.n(e);i.a},8312:function(t,s,a){"use strict";var e=a("32a7"),i=a.n(e);i.a},"857f":function(t,s,a){},"90ca":function(t,s,a){},"92c0":function(t,s,a){"use strict";var e=a("2006"),i=a.n(e);i.a},"9cbb":function(t,s,a){},a41a:function(t,s,a){"use strict";var e=a("b98d"),i=a.n(e);i.a},a6b9:function(t,s,a){"use strict";var e=a("1802"),i=a.n(e);i.a},a9d7:function(t,s,a){},ae9a:function(t,s,a){},b3b4:function(t,s,a){"use strict";var e=a("3f1d"),i=a.n(e);i.a},b98d:function(t,s,a){},bfec:function(t,s,a){},ca34:function(t,s,a){t.exports=a.p+"img/search_active.35f159ad.svg"},cb1e:function(t,s,a){t.exports=a.p+"img/user.cc439c3e.svg"},cd3c:function(t,s,a){t.exports=a.p+"img/order_active.7dd4630a.svg"},e55d:function(t,s,a){"use strict";var e=a("3c28"),i=a.n(e);i.a},e722:function(t,s,a){},f09f:function(t,s,a){"use strict";var e=a("4cb1"),i=a.n(e);i.a},f32b:function(t,s,a){},f4c6:function(t,s,a){"use strict";var e=a("a9d7"),i=a.n(e);i.a},ff62:function(t,s,a){t.exports=a.p+"img/search.083d5e95.svg"}});
//# sourceMappingURL=app.9feb5666.js.map